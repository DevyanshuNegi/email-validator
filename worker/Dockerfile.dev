# Development Dockerfile with hot reload support
FROM golang:1.25-alpine

WORKDIR /app

# Install build dependencies
RUN apk add --no-cache git curl

# Install air (hot reload tool)
# Using the install script for better compatibility
RUN curl -sSfL https://raw.githubusercontent.com/cosmtrek/air/master/install.sh | sh -s -- -b $(go env GOPATH)/bin

# Add Go bin to PATH
ENV PATH="${PATH}:$(go env GOPATH)/bin"

# Copy go mod files first (for better caching)
COPY go.mod go.sum ./
RUN go mod download

# Copy air config
COPY .air.toml ./

# Default command runs air (hot reload)
CMD ["air", "-c", ".air.toml"]
